# План реализации Frontend CRM системы
## Максимальный функционал каждой страницы

### Содержание
1. [Техническая архитектура](#техническая-архитектура)
2. [Макет приложения](#макет-приложения)
3. [Детальное описание страниц](#детальное-описание-страниц)
4. [Компоненты](#компоненты)
5. [Этапы разработки](#этапы-разработки)
6. [Технические требования](#технические-требования)

---

## Техническая архитектура

### Стек технологий
- **Framework**: React 18 + TypeScript
- **State Management**: Redux Toolkit + RTK Query
- **Routing**: React Router v6
- **UI Library**: Material-UI v5 или Ant Design
- **Styling**: Styled-components или Emotion
- **Forms**: React Hook Form + Yup
- **Charts**: Chart.js или Recharts
- **Calendar**: FullCalendar или React Big Calendar
- **Maps**: Yandex Maps API
- **Date**: date-fns
- **Icons**: Material Icons или Ant Design Icons

### Структура проекта
```
src/
├── components/           # Переиспользуемые компоненты
│   ├── common/          # Общие компоненты
│   ├── forms/           # Формы
│   ├── charts/          # Графики
│   └── tables/          # Таблицы
├── pages/               # Страницы приложения
├── features/            # Фичи (slice + компоненты)
├── hooks/               # Кастомные хуки
├── services/            # API сервисы
├── store/               # Redux store
├── types/               # TypeScript типы
├── utils/               # Утилиты
├── constants/           # Константы
└── assets/              # Статические ресурсы
```

---

## Макет приложения

### Общий Layout
```
┌─────────────────────────────────────────────────────┐
│ Header (Навигация + Пользователь + Уведомления)     │
├─────────────────────────────────────────────────────┤
│ │ Sidebar │ Main Content Area                       │
│ │         │                                         │
│ │ - Дашб. │ ┌─────────────────────────────────────┐ │
│ │ - Клиен │ │                                     │ │
│ │ - Заказ │ │         Содержимое страницы         │ │
│ │ - Услуг │ │                                     │ │
│ │ - Финан │ │                                     │ │
│ │ - Кален │ │                                     │ │
│ │ - Налич │ └─────────────────────────────────────┘ │
│ │ - Админ │                                         │
├─────────────────────────────────────────────────────┤
│ Footer (Статус + Время + Версия)                    │
└─────────────────────────────────────────────────────┘
```

### Адаптивность
- **Desktop**: Полная боковая панель + основной контент
- **Tablet**: Сворачиваемая боковая панель
- **Mobile**: Боковая панель как выдвижное меню

---

## Детальное описание страниц

### 1. Дашборд (`/dashboard`)

#### Функционал по ролям

**Owner (Владелец):**
```
┌─────────────────────────────────────────────────────┐
│ 📊 Сводка (4 карточки в ряд)                        │
│ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────────────────┐ │
│ │Заказы │ │Клиенты│ │Доходы │ │     Баланс       │ │
│ │  125  │ │  89   │ │ 2.5М  │ │    1.2М ₽        │ │
│ │ +12%  │ │ +5%   │ │ +18%  │ │   💰 Зеленый     │ │
│ └───────┘ └───────┘ └───────┘ └───────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📈 Графики (2 колонки)                              │
│ ┌─────────────────────┐ ┌─────────────────────────┐ │
│ │ Доходы по месяцам   │ │ Заказы по статусам      │ │
│ │ (Линейный график)   │ │ (Круговая диаграмма)    │ │
│ │                     │ │                         │ │
│ │ ▲                   │ │ 🟢 Завершено 65%        │ │
│ │  \  /\  /\         │ │ 🟡 В работе 25%         │ │
│ │   \/    \/          │ │ 🔵 Новые 10%            │ │
│ └─────────────────────┘ └─────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📊 Аналитика (3 колонки)                            │
│ ┌─────────┐ ┌─────────────┐ ┌─────────────────────┐ │
│ │ Топ     │ │ Источники   │ │ Прибыльность        │ │
│ │менеджеры│ │ клиентов    │ │ по категориям       │ │
│ │         │ │             │ │                     │ │
│ │1.Иванов │ │🔵 Авито 40% │ │ Кондиционеры 60%    │ │
│ │2.Петров │ │🟢 ВК 30%    │ │ Монтаж 25%          │ │
│ │3.Сидоров│ │🟡 Сайт 20%  │ │ Доп.услуги 15%      │ │
│ └─────────┘ └─────────────┘ └─────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📋 Последние события (Таблица)                       │
│ Время    │ Событие              │ Пользователь       │
│ 14:30    │ Заказ #1234 завершен │ Иванов И.         │
│ 14:15    │ Новый клиент         │ Петров П.         │
│ 13:45    │ Платеж получен       │ Система           │
└─────────────────────────────────────────────────────┘
```

**Manager (Менеджер):**
```
┌─────────────────────────────────────────────────────┐
│ 📊 Моя статистика (4 карточки)                      │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────┐ │
│ │Мои      │ │Завершено│ │Выручка  │ │ Моя зарплата│ │
│ │заказы   │ │в месяце │ │за месяц │ │ за месяц    │ │
│ │   24    │ │   18    │ │ 850К ₽  │ │   65К ₽     │ │
│ └─────────┘ └─────────┘ └─────────┘ └─────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📈 Мои показатели (2 колонки)                       │
│ ┌─────────────────────┐ ┌─────────────────────────┐ │
│ │ Динамика заказов    │ │ Структура продаж        │ │
│ │ по дням             │ │                         │ │
│ └─────────────────────┘ └─────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📋 Мои активные заказы                              │
│ [Таблица с возможностью быстрого редактирования]     │
└─────────────────────────────────────────────────────┘
```

**Installer (Монтажник):**
```
┌─────────────────────────────────────────────────────┐
│ 📊 Мои задачи (4 карточки)                          │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────┐ │
│ │Сегодня  │ │Завершено│ │На неделе│ │ Заработано  │ │
│ │монтажей │ │в месяце │ │планов   │ │ за месяц    │ │
│ │    3    │ │   15    │ │    8    │ │   45К ₽     │ │
│ └─────────┘ └─────────┘ └─────────┘ └─────────────┘ │
├─────────────────────────────────────────────────────┤
│ 🗓 Календарь на сегодня                              │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 09:00-12:00  Монтаж у Иванова    [В ПРОЦЕССЕ]  │ │
│ │ 14:00-17:00  Демонтаж у Петрова  [ЗАПЛАНИРОВАН]│ │
│ │ 18:00-19:00  Диагностика         [ЗАПЛАНИРОВАН]│ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 🚗 Оптимизированный маршрут                         │
│ [Карта с точками и оптимальным маршрутом]            │
└─────────────────────────────────────────────────────┘
```

#### Интерактивность
- **Автообновление** каждые 30 секунд
- **Клик по карточкам** - переход к детальной странице
- **Drag & Drop** для изменения приоритетов (для owner/manager)
- **Быстрые действия** через контекстное меню

---

### 2. Клиенты (`/clients`)

#### Основной интерфейс
```
┌─────────────────────────────────────────────────────┐
│ 👥 Клиенты                     [+ Добавить клиента] │
├─────────────────────────────────────────────────────┤
│ 🔍 Поиск и фильтры                                  │
│ ┌─────────────┐ ┌──────────┐ ┌─────────┐ ┌────────┐ │
│ │🔍 Поиск...  │ │Источник▼ │ │Период▼  │ │ Сброс  │ │
│ └─────────────┘ └──────────┘ └─────────┘ └────────┘ │
├─────────────────────────────────────────────────────┤
│ 📊 Статистика (горизонтальные карточки)              │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────────┐ │
│ │Всего│ │Авито│ │ ВК  │ │Сайт │ │Реком│ │ Новые   │ │
│ │ 234 │ │ 95  │ │ 67  │ │ 45  │ │ 27  │ │ за месяц│ │
│ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────────┘ │
├─────────────────────────────────────────────────────┤
│ 📋 Таблица клиентов                                 │
│ ┌─────────────────────────────────────────────────┐ │
│ │☐│ID │Имя        │Телефон    │Адрес   │Источник│⚙│ │
│ │☐│001│Иванов И.И.│+7999...   │Москва..│Авито   │⚙│ │
│ │☐│002│Петров П.П.│+7988...   │СПб...  │ВК      │⚙│ │
│ │☐│003│Сидоров С. │+7977...   │Казань..│Сайт    │⚙│ │
│ └─────────────────────────────────────────────────┘ │
│ [Показано 1-20 из 234]     [◀ 1 2 3 ... 12 ▶]      │
└─────────────────────────────────────────────────────┘
```

#### Расширенный функционал
1. **Массовые операции**
   - Выбор нескольких клиентов (чекбоксы)
   - Экспорт выбранных в Excel/CSV
   - Массовое изменение источника
   - Удаление (с подтверждением)

2. **Быстрое редактирование**
   - Inline редактирование в таблице
   - Модальные окна для полного редактирования
   - Drag & drop для загрузки фотографий

3. **Интеграции**
   - Автоопределение региона по телефону
   - Проверка дублей при добавлении
   - Интеграция с картами для адресов

4. **Аналитика клиентов**
   - Сегментация по различным критериям
   - История взаимодействий
   - Прогноз повторных обращений

#### Детальная страница клиента (`/clients/:id`)
```
┌─────────────────────────────────────────────────────┐
│ ← Назад     👤 Иванов Иван Иванович    [Редактировать]│
├─────────────────────────────────────────────────────┤
│ 📋 Информация о клиенте (2 колонки)                  │
│ ┌─────────────────────┐ ┌─────────────────────────┐ │
│ │ Основные данные     │ │ Статистика              │ │
│ │ 📞 +7 999 123-45-67│ │ 📊 Заказов: 3           │ │
│ │ 📍 г.Москва, ул...  │ │ 💰 Потрачено: 125К ₽    │ │
│ │ 🌐 Источник: Авито  │ │ 📅 Первый заказ: 01.01  │ │
│ │ 📅 Создан: 15.03.24 │ │ 📅 Последний: 15.08     │ │
│ └─────────────────────┘ └─────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📦 История заказов                                  │
│ ┌─────────────────────────────────────────────────┐ │
│ │#│Дата    │Статус    │Услуги       │Сумма │Детали│ │
│ │1│15.08.24│Завершен  │Монтаж Samsung│45К ₽ │ 👁   │ │
│ │2│10.07.24│Завершен  │Чистка       │5К ₽  │ 👁   │ │
│ │3│01.01.24│Завершен  │Установка LG │75К ₽ │ 👁   │ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📝 Заметки и комментарии                            │
│ ┌─────────────────────────────────────────────────┐ │
│ │ [Текстовое поле для заметок]                    │ │
│ │ 15.08.24 - Менеджер Петров: Доволен работой     │ │
│ │ 10.07.24 - Менеджер Иванов: Просил скидку       │ │
│ └─────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────┘
```

---

### 3. Заказы (`/orders`)

#### Основной интерфейс
```
┌─────────────────────────────────────────────────────┐
│ 📦 Заказы                         [+ Создать заказ] │
├─────────────────────────────────────────────────────┤
│ 🔍 Фильтры и поиск                                  │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────┐ │
│ │Статус ▼ │ │Менеджер▼│ │Период ▼ │ │🔍 Поиск...  │ │
│ └─────────┘ └─────────┘ └─────────┘ └─────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📊 Канбан доска (по статусам)                       │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────┐ │
│ │🆕 НОВЫЕ │ │🔄 В РАБОТЕ│ │✅ ЗАВЕРШЕНЫ│ │❌ ОТМЕНЕНЫ │ │
│ │  (12)   │ │   (8)   │ │   (156) │ │    (3)     │ │
│ │─────────│ │─────────│ │─────────│ │─────────   │ │
│ │┌───────┐│ │┌───────┐│ │┌───────┐│ │┌─────────┐ │ │
│ ││#1234  ││ ││#1231  ││ ││#1230  ││ ││#1225    │ │ │
│ ││Иванов ││ ││Петров ││ ││Сидоров││ ││Козлов   │ │ │
│ ││45К ₽  ││ ││67К ₽  ││ ││23К ₽  ││ ││12К ₽    │ │ │
│ │└───────┘│ │└───────┘│ │└───────┘│ │└─────────┘ │ │
│ │[Drag]   │ │[Drag]   │ │[Drag]   │ │            │ │
│ └─────────┘ └─────────┘ └─────────┘ └─────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📋 Таблица заказов (альтернативное представление)    │
│ [Переключатель: Канбан / Таблица]                    │
└─────────────────────────────────────────────────────┘
```

#### Расширенный функционал заказов

1. **Канбан доска**
   - Drag & Drop между статусами
   - Автосохранение изменений
   - Фильтрация по менеджерам/монтажникам
   - Цветовая кодировка по приоритету

2. **Быстрые действия**
   - Клик на карточку = детальная информация
   - Правый клик = контекстное меню
   - Массовые операции через чекбоксы

3. **Уведомления**
   - Всплывающие уведомления о изменениях
   - Звуковые сигналы для критичных событий

#### Создание/Редактирование заказа (`/orders/new`, `/orders/:id/edit`)
```
┌─────────────────────────────────────────────────────┐
│ 📦 Новый заказ                      [Сохранить] [❌] │
├─────────────────────────────────────────────────────┤
│ 👤 Информация о клиенте                              │
│ ┌─────────────────────────────────────────────────┐ │
│ │ Клиент: [🔍 Выбрать существующего / + Создать]  │ │
│ │ Выбран: Иванов И.И. (+7999123456)              │ │
│ │ Адрес: г.Москва, ул.Ленина, д.1                 │ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 👨‍💼 Назначение сотрудников                           │
│ ┌─────────────────────────────────────────────────┐ │
│ │ Менеджер: [Dropdown с менеджерами]              │ │
│ │ Монтажники: [Multi-select с фотографиями]       │ │
│ │ ┌─────┐ ┌─────┐ ┌─────┐                         │ │
│ │ │ 👤  │ │ 👤  │ │ 👤  │ [+ Добавить]            │ │
│ │ │И.И. │ │П.П. │ │С.С. │                         │ │
│ │ └─────┘ └─────┘ └─────┘                         │ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 🛠 Услуги и материалы                               │
│ ┌─────────────────────────────────────────────────┐ │
│ │ [+ Добавить услугу]                             │ │
│ │                                                 │ │
│ │ 1. Samsung AR12TXHQASINUA                       │ │
│ │    Категория: Кондиционер                       │ │
│ │    Себестоимость: 35 000 ₽                      │ │
│ │    Цена: 45 000 ₽ [Изменить]      [🗑 Удалить] │ │
│ │    Продавец: Петров П.П.                        │ │
│ │                                                 │ │
│ │ 2. Монтаж стандартный                           │ │
│ │    Категория: Монтаж                            │ │
│ │    Цена: 8 000 ₽ [Изменить]       [🗑 Удалить] │ │
│ │                                                 │ │
│ │ ────────────────────────                        │ │
│ │ Итого: 53 000 ₽                                │ │
│ │ Прибыль: 18 000 ₽ (34%)                        │ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📝 Дополнительная информация                        │
│ ┌─────────────────────────────────────────────────┐ │
│ │ Статус: [Dropdown]                              │ │
│ │ Приоритет: [Низкий/Обычный/Высокий/Срочный]     │ │
│ │ Комментарии: [Текстовое поле]                   │ │
│ │ Дата планируемого выполнения: [Date picker]     │ │
│ └─────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────┘
```

#### Детальная страница заказа (`/orders/:id`)
```
┌─────────────────────────────────────────────────────┐
│ ← Назад    📦 Заказ #1234               [Редактировать]│
├─────────────────────────────────────────────────────┤
│ 📊 Статус и основная информация                      │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 🟢 ЗАВЕРШЕН    📅 15.08.2024    💰 53 000 ₽     │ │
│ │ Менеджер: Петров П.П.  |  Прибыль: 18 000 ₽    │ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 👤 Клиент (карточка с действиями)                   │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 👤 Иванов Иван Иванович    📞 +7 999 123-45-67  │ │
│ │ 📍 г.Москва, ул.Ленина, д.1, кв.15              │ │
│ │ [📞 Позвонить] [💬 SMS] [👁 Профиль клиента]     │ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 👨‍🔧 Команда                                         │
│ ┌─────────────────────────────────────────────────┐ │
│ │ Монтажники:                                     │ │
│ │ ┌─────┐ ┌─────┐         Статус работ:          │ │
│ │ │ 👤  │ │ 👤  │         ✅ Начат: 09:00        │ │
│ │ │И.И. │ │П.П. │         ✅ Завершен: 14:30     │ │
│ │ └─────┘ └─────┘         ⏱ Время: 5ч 30м        │ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 🛠 Позиции заказа                                   │
│ ┌─────────────────────────────────────────────────┐ │
│ │ №│Наименование      │Категория │Цена   │Продавец│ │
│ │ 1│Samsung AR12...   │Кондиционер│45К ₽  │Петров │ │
│ │ 2│Монтаж стандартный│Монтаж    │8К ₽   │Петров │ │
│ │ ────────────────────────────────────────────   │ │
│ │ Итого:                          53 000 ₽      │ │
│ │ Себестоимость:                  35 000 ₽      │ │
│ │ Прибыль:                        18 000 ₽ (34%)│ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ 📅 История изменений                                │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 15.08 14:30 - Заказ завершен (Монтажник Иванов)│ │
│ │ 15.08 09:00 - Работы начаты (Монтажник Иванов) │ │
│ │ 14.08 16:00 - Заказ назначен (Менеджер Петров) │ │
│ │ 12.08 10:15 - Заказ создан (Менеджер Петров)   │ │
│ └─────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────┘
```

---

### 4. Услуги (`/services`)

#### Основной интерфейс
```
┌─────────────────────────────────────────────────────┐
│ 🛠 Каталог услуг                   [+ Добавить услугу]│
├─────────────────────────────────────────────